<!DOCTYPE html> 
{%load static%}
<html lang="en">
	
<!-- easyrdv/chat-doctor.html  30 Nov 2019 04:12:13 GMT -->
<head>
		<meta charset="utf-8">
		<title>EasyRDV</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
		
		<!-- Favicons -->
		<link href="{%static 'assets/img/favicon.png'%}" rel="icon">
		
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="{%static 'assets/css/bootstrap.min.css'%}">
		
		<!-- Fontawesome CSS -->
		<link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/fontawesome.min.css'%}">
		<link rel="stylesheet" href="{%static 'assets/plugins/fontawesome/css/all.min.css'%}">
		
		<!-- Main CSS -->
		<link rel="stylesheet" href="{%static 'assets/css/style.css'%}">
		
		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="{%static'assets/js/html5shiv.min.js"></script>
			<script src="{%static'assets/js/respond.min.js"></script>
		<![endif]-->
	
	</head>
	<body class="chat-page">

		<!-- Main Wrapper -->
		<div class="main-wrapper">
		
		<!-- Main Wrapper -->
		<div class="main-wrapper">
		
			<!-- Header -->
			<header class="header">
				<nav class="navbar navbar-expand-lg header-nav">
					<div class="navbar-header">
						<a id="mobile_btn" href="javascript:void(0);">
							<span class="bar-icon">
								<span></span>
								<span></span>
								<span></span>
							</span>
						</a>
						<a href="index-2.html" class="navbar-brand logo">
							<img src="{%static 'assets/img/logo.png'%}" class="img-fluid" alt="Logo">
						</a>
					</div>
					<div class="main-menu-wrapper">
						<div class="menu-header">
							<a href="index-2.html" class="menu-logo">
								<img src="{%static 'assets/img/logo.png'%}" class="img-fluid" alt="Logo">
							</a>
							<a id="menu_close" class="menu-close" href="javascript:void(0);">
								<i class="fas fa-times"></i>
							</a>
						</div>
						<ul class="main-nav">
							<li>
								<a href="index-2.html">Home</a>
							</li>
							<li class="has-submenu ">
								<a href="#">Doctors <i class="fas fa-chevron-down"></i></a>
								<ul class="submenu">
									<li><a href="doctor-dashboard.html">Doctor Dashboard</a></li>
									<li ><a href="doctor-schedule-timings-page.html">Schedule Timing</a></li>
									<li><a href="my-patients.html">Patients List</a></li>
									<li><a href="patient-profile.html">Patients Profile</a></li>
								
									<li><a href="doctor-profile-settings.html">Profile Settings</a></li>
									<li><a href="doctor-register.html">Doctor Register</a></li>
								</ul>
							</li>	
							<li class="has-submenu active ">
								<a href="#">Laboratories <i class="fas fa-chevron-down"></i></a>
                                <ul class="submenu ">
									<li > <a href="laboratories-dashboard.html">Appointment dashboard.</a></li>
									<li><a href="doctor-profile.html">Analysis Services</a></li>
									<li class="active" ><a href="booking.html">Send analysis</a></li>
									<li ><a href="laboratories-schedule-timings.html">Schedule Timing</a></li>
							
									<li><a href="profile-settings.html">Profile Settings</a></li>
									<li><a href="change-password.html">Change Password</a></li>
								</ul>

							</li>	
							
							
							<li>
								<a href="admin/index.html" target="_blank">Admin</a>
							</li>
							<li class="login-link">
								<a href="doctor-login.html">Login / Signup</a>
							</li>
						</ul>
					</div>		 
					<ul class="nav header-navbar-rht">
						<li class="nav-item contact-item">
							<div class="header-contact-img">
								<i class="far fa-hospital"></i>							
							</div>
							<div class="header-contact-detail">
								<p class="contact-header">Contact</p>
								<p class="contact-info-header"> 0656146690</p>
							</div>
						</li>
						
						<!-- User Menu -->
						<li class="nav-item dropdown has-arrow logged-item">
							<a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
							</a>
							<div class="dropdown-menu dropdown-menu-right">
								<div class="user-header">
									<div class="user-header">
										<div class="user-text">
											<h6>{{user.username}}</h6>
											<p class="text-muted mb-0">Laboritory</p>
										</div>
									</div>
								</div>
								<a class="dropdown-item" href="doctor-dashboard.html">Dashboard</a>
								<a class="dropdown-item" href="doctor-profile-settings.html">Profile Settings</a>
								<a class="dropdown-item" href="doctor-login.html">Logout</a>
							</div>
						</li>
						<!-- /User Menu -->
						
					</ul>
				</nav>
			</header>
			<!-- /Header -->
			
			<!-- Page Content -->
			<div class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xl-12">
							<div class="chat-window">
							
								<!-- Chat Left -->
								<div class="chat-cont-left">
									<div class="chat-header">
										<span>Chats</span>
										<a href="javascript:void(0)" class="chat-compose">
											<i class="material-icons">control_point</i>
										</a>
									</div>
									<form class="chat-search">
										<div class="input-group">
											<div class="input-group-prepend">
												<i class="fas fa-search"></i>
											</div>
											<input type="text" class="form-control" placeholder="Search">
										</div>
									</form>
									<div class="chat-users-list">
										<div class="chat-scroll">
											{% for user,id in users %}
											<a href="javascript:void(0);" class="media user-item" data-username="{{ user.username }}" data-id="{{id}}">
												<div class="media-body">
													<div class="user-name">{{ user.username }}</div>
												</div>
											</a>
											{% endfor %}
										</div>
									</div>
								</div>
								<!-- /Chat Left -->
								
								<!-- Chat Right -->
								<div class="chat-cont-right">
									<div class="chat-header">
										<div class="media">
											<div class="media-body">
												<div type="hidden"  id="userId"></div>
												<div class="user-name" id="chat-username">Select a user</div>
											</div>
										</div>
									</div>
									<div class="chat-body">
										<div class="chat-scroll">
											
										</div>
									</div>
									<div class="chat-footer">
										<div class="input-group-append">
											<div class="change-photo-btn">
												<span><a onClick="addResult()"><i class="fa fa-upload"></i> Upload Result</a></span>
												<input type="file" class="upload" id="file-upload" name="file" >
											</div>
										</div>
									</div>
								</div>
								<!-- /Chat Right -->
								
							</div>
						</div>
					</div>
					<!-- /Row -->

				</div>

			</div>		
			<!-- /Page Content -->
   
			<!-- Footer -->
			<footer class="footer">
				
				<!-- Footer Top -->
				<div class="footer-top">
					<div class="container-fluid">
						<div class="row">
							<div class="col-lg-3 col-md-6">
							
								<!-- Footer Widget -->
								<div class="footer-widget footer-about">
									<div class="footer-logo">
										<img src="{%static 'assets/img/logoT.png'%}" alt="logo">
									</div>
									<div class="footer-about-content">
										<p>phrase tkon mliha 3la easyrdv. </p>
										<div class="social-icon">
											<ul>
												<li>
													<a href="#" target="_blank"><i class="fab fa-facebook-f"></i> </a>
												</li>
												<li>
													<a href="#" target="_blank"><i class="fab fa-twitter"></i> </a>
												</li>
												<li>
													<a href="#" target="_blank"><i class="fab fa-linkedin-in"></i></a>
												</li>
												<li>
													<a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
												</li>
												<li>
													<a href="#" target="_blank"><i class="fab fa-dribbble"></i> </a>
												</li>
											</ul>
										</div>
									</div>
								</div>
								<!-- /Footer Widget -->
								
							</div>
							
							<div class="col-lg-3 col-md-6">
							
								<!-- Footer Widget -->
								<div class="footer-widget footer-menu">
									<h2 class="footer-title">For Laboratories</h2>
									<ul>
										<li><a href="Laboratories-login.html"><i class="fas fa-angle-double-right"></i>login.</a></li>
										<li><a href="laboratories-dashboard.html"><i class="fas fa-angle-double-right"></i>Appointment dashboard.</a></li>
										<li><a href="laboratories-avaible-analyses.html"><i class="fas fa-angle-double-right"></i>Analysis Services</a></li>
										<li><a href="laboratories-send-result-analisis.html"><i class="fas fa-angle-double-right"></i>Send analysis</a></li>							
										<li><a href="Laboratories-profilSeting.html"><i class="fas fa-angle-double-right"></i>Profile Settings</a></li>
										<li><a href="laboratories-change-password.html"><i class="fas fa-angle-double-right"></i>Change Password</a></li>
			
									</ul>
								</div>
								<!-- /Footer Widget -->
								
							</div>
							
							<div class="col-lg-3 col-md-6">
							
								<!-- Footer Widget -->
								<div class="footer-widget footer-menu">
									<h2 class="footer-title">For Doctors</h2>
									<ul>
										<li><a href="appointments.html"><i class="fas fa-angle-double-right"></i> Appointments</a></li>
										<li><a href="laboratories-schedule-timings.html"><i class="fas fa-angle-double-right"></i> schedule timings</a></li>
										<li><a href="doctor-login.html"><i class="fas fa-angle-double-right"></i> Login</a></li>
										<li><a href="doctor-register.html"><i class="fas fa-angle-double-right"></i> Register</a></li>
										<li><a href="doctor-dashboard.html"><i class="fas fa-angle-double-right"></i> Doctor Dashboard</a></li>
									</ul>
								</div>
								<!-- /Footer Widget -->
								
							</div>
							
							<div class="col-lg-3 col-md-6">
							
								<!-- Footer Widget -->
								<div class="footer-widget footer-contact">
									<h2 class="footer-title">Contact Us</h2>
									<div class="footer-contact-info">
										<div class="footer-address">
											<span><i class="fas fa-map-marker-alt"></i></span>
											<p> cité invesstisseur <br> oum el bouaghi</p>
										</div>
										<p>
											<i class="fas fa-phone-alt"></i>
											0656146690
										</p>
										<p class="mb-0">
											<i class="fas fa-envelope"></i>
											salahmaou16@gmail.com
										</p>
									</div>
								</div>
								<!-- /Footer Widget -->
								
								
							</div>
							
						</div>
					</div>
				</div>
				<!-- /Footer Top -->
				
				<!-- Footer Bottom -->
				
			</footer>
		   
		</div>
		<!-- /Main Wrapper -->
		
		<!-- Voice Call Modal -->
		<div class="modal fade call-modal" id="voice_call">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-body">
					
						<!-- Outgoing Call -->
						<div class="call-box incoming-box">
							<div class="call-wrapper">
								<div class="call-inner">
									<div class="call-user">
										<img alt="User Image" src="{%static 'assets/img/patients/patient.jpg'%}" class="call-avatar">
										<h4>Richard Wilson</h4>
										<span>Connecting...</span>
									</div>							
									<div class="call-items">
										<a href="javascript:void(0);" class="btn call-item call-end" data-dismiss="modal" aria-label="Close"><i class="material-icons">call_end</i></a>
										<a href="voice-call.html" class="btn call-item call-start"><i class="material-icons">call</i></a>
									</div>
								</div>
							</div>
						</div>
						<!-- Outgoing Call -->

					</div>
				</div>
			</div>
		</div>
		<!-- /Voice Call Modal -->
		
		<!-- Video Call Modal -->
		<div class="modal fade call-modal" id="video_call">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-body">
					
						<!-- Incoming Call -->
						<div class="call-box incoming-box">
							<div class="call-wrapper">
								<div class="call-inner">
									<div class="call-user">
										<img class="call-avatar" src="{%static 'assets/img/patients/patient.jpg'%}" alt="User Image">
										<h4>Richard Wilson</h4>
										<span>Calling ...</span>
									</div>							
									<div class="call-items">
										<a href="javascript:void(0);" class="btn call-item call-end" data-dismiss="modal" aria-label="Close"><i class="material-icons">call_end</i></a>
										<a href="video-call.html" class="btn call-item call-start"><i class="material-icons">videocam</i></a>
									</div>
								</div>
							</div>
						</div>
						<!-- /Incoming Call -->
						
					</div>
				</div>
			</div>
		</div>
		<!-- Video Call Modal -->
	  
		<!-- jQuery -->
		<script src="{%static 'assets/js/jquery.min.js'%}"></script>
		
		<!-- Bootstrap Core JS -->
		<script src="{%static 'assets/js/popper.min.js'%}"></script>
		<script src="{%static 'assets/js/bootstrap.min.js'%}"></script>
		
		<!-- Custom JS -->
		<script src="{%static 'assets/js/script.js'%}"></script>
		<script>
			$(document).ready(function() {
				$('.user-item').on('click', function() {
					var username = $(this).data('username');
					var userId = $(this).data('id');
					$('#userId').attr('data-id', userId);
					$('#chat-username').text(username);
					$('#chat-content').text('Information about ' + username);
				});

		});
			</script>
			<script type="module">
				import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
				import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';
				import { getFirestore,collection,doc,query,where,getDocs,deleteDoc,addDoc } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';
		
				// Your web app's Firebase configuration
				const firebaseConfig = {
					apiKey: "AIzaSyBqxNtiEwygfIfp7I-JiE6GdCiiS3gHBD4",
					projectId: "easyrdv-cfe1c",
					storageBucket: "easyrdv-cfe1c.appspot.com",
					appId: "1:995927508473:android:99f6e9baf89ebe1d36a928"
				};
		
				// Initialize Firebase
				const app = initializeApp(firebaseConfig);
		
				// Initialize Firebase Authentication and get a reference to the service
				const auth = getAuth(app);
				
				// Optionally, initialize Firestore if you need it
				const db = getFirestore(app);
				document.addEventListener('DOMContentLoaded',()=>{
					async function addResult(){
						const fileName = document.getElementById('file-upload').files[0].name.split('.').slice(0, -1).join('.');
						const data = {
                          labRef: "{{user.firebase_id}}",
						  name: fileName,
						  userRef: $('#userId').data('id')
						};
					await addDoc(collection(db,'testResult'),data);
					 
					}
					$('#file-upload').on('change', function() {
						var formData = new FormData();
						var file = document.getElementById('file-upload').files[0];
						var fileName = file.name.split('.').slice(0, -1).join('.');
						var userRef = $('#userId').data('id');
						formData.append('file', file);
						formData.append('userRef',fileName+'-'+userRef);
				
						$.ajax({
							url: "{% url 'upload_result' %}",
							type: 'POST',
							data: formData,
							processData: false,
							contentType: false,
							success: function(data) {
								alert('File uploaded successfully');
							},
							error: function(xhr, errmsg, err) {
								alert('Failed to upload file');
								console.log(xhr.status + ": " + xhr.responseText);
							}
						});
						addResult();
				});
					
					window.addResult = addResult;
				})
			</script>
			
		
	</body>

<!-- doccure/chat-doctor.html  30 Nov 2019 04:12:14 GMT -->
</html>